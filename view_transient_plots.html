<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transient Phase Detection - Visualization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .description {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .plot-container {
            background-color: white;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .plot-container h2 {
            margin-top: 0;
            color: #2c3e50;
        }
        .plot-container img {
            width: 100%;
            height: auto;
            border-radius: 4px;
        }
        .legend {
            background-color: #ecf0f1;
            padding: 15px;
            border-radius: 4px;
            margin-top: 15px;
        }
        .legend h3 {
            margin-top: 0;
            font-size: 16px;
        }
        .legend ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .legend li {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <h1>üìä Transient Phase Detection Analysis</h1>
    
    <div class="description">
        <h2>About This Visualization</h2>
        <p>These plots show the automated transient phase detection for a <strong>stationary system</strong> (constant parameters over time).</p>
        
        <p><strong>Top subplot:</strong> Shows the metric values over simulation time with:</p>
        <ul>
            <li><span style="background-color: rgba(255,0,0,0.2); padding: 2px 6px;">Red shaded area</span> = Transient phase (system warming up)</li>
            <li><span style="background-color: rgba(0,128,0,0.2); padding: 2px 6px;">Green shaded area</span> = Steady-state phase</li>
            <li><span style="color: darkgreen; font-weight: bold;">Green dashed line</span> = Steady-state mean</li>
            <li><span style="color: green;">Green dotted lines</span> = ¬±1 standard deviation</li>
        </ul>
        
        <p><strong>Bottom subplot:</strong> Shows the relative variation curve R<sub>k</sub> = |x<sub>k</sub> - xÃÑ| / |xÃÑ| where:</p>
        <ul>
            <li>x<sub>k</sub> = truncated mean (average from bin k onwards)</li>
            <li>xÃÑ = overall mean of all bins</li>
            <li><span style="color: red; font-weight: bold;">Red vertical line</span> = Detected "knee point" (end of transient)</li>
        </ul>
        
        <p><strong>Algorithm:</strong> Uses perpendicular distance method to find the knee point in the R<sub>k</sub> curve - the point of maximum distance from the line connecting first and last points.</p>
    </div>

    <div class="plot-container">
        <h2>1. Reservation Success Rate</h2>
        <img src="transient_plots/transient_bin_success_rate.png" alt="Success Rate Transient Detection">
        <div class="legend">
            <h3>Interpretation:</h3>
            <ul>
                <li>This metric shows what fraction of reservation attempts are successful in each time bin</li>
                <li>The transient phase represents the initial period where the system is filling up with users and stabilizing</li>
                <li>Once steady-state is reached, the success rate should fluctuate around a stable mean</li>
            </ul>
        </div>
    </div>

    <div class="plot-container">
        <h2>2. Average Attempts Before Success</h2>
        <img src="transient_plots/transient_bin_avg_attempts.png" alt="Attempts Transient Detection">
        <div class="legend">
            <h3>Interpretation:</h3>
            <ul>
                <li>How many attempts users typically make before successfully reserving a car</li>
                <li>Value of 1.0 means first attempt is always successful</li>
                <li>Higher values indicate more competition for cars</li>
            </ul>
        </div>
    </div>

    <div class="plot-container">
        <h2>3. Car Utilization Rate</h2>
        <img src="transient_plots/transient_bin_utilization_rate.png" alt="Utilization Transient Detection">
        <div class="legend">
            <h3>Interpretation:</h3>
            <ul>
                <li>Fraction of time cars spend actively transporting users</li>
                <li>Low values are expected in a shared mobility system (cars wait for next user)</li>
                <li>This metric may have longer transient periods as usage patterns stabilize</li>
            </ul>
        </div>
    </div>

    <div class="plot-container">
        <h2>4. Average Trip Distance</h2>
        <img src="transient_plots/transient_bin_avg_trip_distance.png" alt="Trip Distance Transient Detection">
        <div class="legend">
            <h3>Interpretation:</h3>
            <ul>
                <li>Average distance traveled per trip in each time bin</li>
                <li>Note: Display values are divided by 10 (simulation uses internal units)</li>
                <li>Should stabilize once user trip patterns become consistent</li>
            </ul>
        </div>
    </div>

    <div class="description">
        <h2>üîç Evaluating Transient Detection Quality</h2>
        <p><strong>Good detection indicators:</strong></p>
        <ul>
            <li>The knee point is clearly visible in the R<sub>k</sub> curve</li>
            <li>Data in the green (steady-state) region shows consistent behavior around the mean</li>
            <li>Transient phase captures initial ramp-up period with higher variation</li>
            <li>Sufficient steady-state bins (at least 20-30) for reliable statistics</li>
        </ul>
        
        <p><strong>Potential issues to check:</strong></p>
        <ul>
            <li>If transient phase is too long (>80% of simulation), may need longer run or different algorithm</li>
            <li>If R<sub>k</sub> curve has no clear knee (nearly linear), system may not be reaching steady-state</li>
            <li>If steady-state data still shows trends, system may not be truly stationary</li>
            <li>Very few steady-state bins suggest insufficient data for reliable statistics</li>
        </ul>
    </div>
</body>
</html>
